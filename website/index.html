<!DOCTYPE html>
<html>
	<head>
		<link
			rel="stylesheet"
			href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css"
			integrity="sha384-JcKb8q3iqJ61gNV9KGb8thSsNjpSL0n8PARn9HuZOnIxN0hoP+VmmDGMN5t9UJ0Z"
			crossorigin="anonymous"
		/>
		<link
			rel="stylesheet"
			href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/4.0.0/github-markdown.min.css"
			integrity="sha512-Oy18vBnbSJkXTndr2n6lDMO5NN31UljR8e/ICzVPrGpSud4Gkckb8yUpqhKuUNoE+o9gAb4O/rAxxw1ojyUVzg=="
			crossorigin="anonymous"
		/>
		<link rel="stylesheet" href="style.css" />
	</head>
	<body class="container">
		<ul class="nav nav-tabs" id="myTab" role="tablist"></ul>
		<div class="tab-content markdown-body" id="myTabContent"></div>

		<script
			src="https://cdnjs.cloudflare.com/ajax/libs/markdown-it/11.0.0/markdown-it.min.js"
			integrity="sha512-0tDdhRf9dcDufaaOQQdvywK56y+cwomy6rjOrqk05N61cQOTdO2Cqqgq8EfXVBDXJe0TH9smqvDicQzMiBG14g=="
			crossorigin="anonymous"
		></script>
		<script>
			async function rendertext() {
				var md = window.markdownit();
				md.configure({
					options: {
						html: true,
						xhtmlOut: true,
						breaks: true,
						langPrefix: "language-",
						linkify: true,
						typographer: false,
						maxNesting: 100,
					},

					components: {
						core: {},
						block: {},
						inline: {},
					},
				});
				let mds = await fetch("http://localhost:3000/api/docs/");
				mds = await mds.json();
				var tabs = "";
				var content = "";
				var i = 0;

				for (let key in mds.setup) {
					var value = mds.setup[key];
					key = key[0].toUpperCase() + key.slice(1);

					tabs += `<li class="nav-item">
								<a
									class="nav-link ${i === 0 ? "active" : ""}"
									id="${key}-tab"
									data-toggle="tab"
									href="#${key}"
									role="tab"
									aria-controls="home"
									aria-selected="true"
									>${key}</a
								>
							</li>`;

					value = md.render(
						value.replace(/:white_check_mark:/g, "✅").replace(/:x:/g, "❌")
					);

					content += `<div class="tab-pane ${
						i === 0 ? "show active" : ""
					}" id="${key}">${value}</div>`;
					i++;
				}

				document.getElementById("myTab").innerHTML = tabs;
				document.getElementById("myTabContent").innerHTML = content;
			}
			window.onload = () => {
				rendertext();
			};
		</script>
		<script
			src="https://code.jquery.com/jquery-3.5.1.slim.min.js"
			integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj"
			crossorigin="anonymous"
		></script>
		<script
			src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
			integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN"
			crossorigin="anonymous"
		></script>
		<script
			src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"
			integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV"
			crossorigin="anonymous"
		></script>
	</body>
</html>
